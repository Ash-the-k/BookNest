<div class="modal fade" id="modalMarkCompleted" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Mark as Completed</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <form method="POST" action="/books/<%= book.id %>/mark-completed"> <div class="modal-body">
            <label class="form-label">Rating (required)</label>
            <select name="rating_tag" class="form-select" required>
                <option value="">Select...</option>
                <option value="perfection" <%= book.rating_tag === 'perfection' ? 'selected' : '' %>>Perfection</option>
                <option value="go_for_it" <%= book.rating_tag === 'go_for_it' ? 'selected' : '' %>>Go for it</option>
                <option value="time_pass" <%= book.rating_tag === 'time_pass' ? 'selected' : '' %>>Time pass</option>
                <option value="skip" <%= book.rating_tag === 'skip' ? 'selected' : '' %>>Skip</option>
            </select>
            <div class="mt-3">
                <label class="form-label">Completed Date</label>
                <input type="date" name="completed_date" class="form-control" value="<%= book.completed_date || '' %>">
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-success">Confirm</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="modalStartReading" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Start Reading</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <form method="POST" action="/books/<%= book.id %>/start-reading">
        <div class="modal-body">
            <label class="form-label">Started Date</label>
            <input type="date" name="started_date" class="form-control" value="<%= book.started_date || '' %>">
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary">Start</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="modalDrop" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Drop Book</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <form method="POST" action="/books/<%= book.id %>/drop">
        <div class="modal-body">
            <p>Are you sure you want to drop <strong><%= book.title %></strong>?</p>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-danger">Yes, Drop</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="modalWishlist" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Move to Wishlist</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <form method="POST" action="/books/<%= book.id %>/move-to-wishlist">
        <div class="modal-body">
            <p>Move <strong><%= book.title %></strong> back to wishlist?</p>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary">Yes, Move</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="modalEditStarted" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Edit Started Date</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <form method="POST" action="/books/<%= book.id %>/edit-started-date">
          <div class="modal-body">
              <input type="date" name="started_date" class="form-control" value="<%= book.started_date || '' %>">
          </div>
          <div class="modal-footer">
              <button type="submit" class="btn btn-primary">Save</button>
          </div>
        </form>
      </div>
    </div>
</div>

<div class="modal fade" id="modalEditCompleted" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Edit Completed Date</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <form method="POST" action="/books/<%= book.id %>/edit-completed-date">
          <div class="modal-body">
              <input type="date" name="completed_date" class="form-control" value="<%= book.completed_date || '' %>">
          </div>
          <div class="modal-footer">
              <button type="submit" class="btn btn-primary">Save</button>
          </div>
        </form>
      </div>
    </div>
</div>

<div class="modal fade" id="modalAddReview" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Add Review</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <form method="POST" action="/books/<%= book.id %>/reviews">
          <div class="modal-body">
              <textarea name="content" class="form-control" rows="4" required placeholder="Write your thoughts..."></textarea>
          </div>
          <div class="modal-footer">
              <button type="submit" class="btn btn-primary">Add Review</button>
          </div>
        </form>
      </div>
    </div>
</div>